@import "tailwindcss";

@layer base {
  :root {
    --background: 220 20% 97%;
    --foreground: 222.2 84% 4.9%;
    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;
    --primary: 221.2 83.2% 53.3%;
    --primary-foreground: 210 40% 98%;
    --secondary: 215 25% 93%;
    --secondary-foreground: 222.2 47.4% 11.2%;
    --muted: 215 25% 93%;
    --muted-foreground: 215.4 16.3% 46.9%;
    --accent: 215 25% 93%;
    --accent-foreground: 222.2 47.4% 11.2%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;
    --border: 216 20% 85%;
    --input: 216 20% 85%;
    --ring: 221.2 83.2% 53.3%;
    --radius: 0.5rem;

    /* Chart colors */
    --chart-1: 221.2 83.2% 53.3%;
    --chart-2: 142.1 76.2% 36.3%;
    --chart-3: 47.9 95.8% 53.1%;
    --chart-4: 24.6 95% 53.1%;
    --chart-5: 0 84.2% 60.2%;

    /* Risk level colors */
    --risk-low: 142.1 76.2% 36.3%;
    --risk-medium: 47.9 95.8% 53.1%;
    --risk-high: 24.6 95% 53.1%;
    --risk-critical: 0 84.2% 60.2%;
  }

  .dark {
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;
    --card: 222.2 47% 11%;
    --card-foreground: 210 40% 98%;
    --popover: 222.2 47% 13%;
    --popover-foreground: 210 40% 98%;
    --primary: 217.2 91.2% 59.8%;
    --primary-foreground: 222.2 47.4% 11.2%;
    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;
    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;
    --accent: 217.2 32.6% 17.5%;
    --accent-foreground: 210 40% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;
    --border: 217.2 32.6% 17.5%;
    --input: 217.2 32.6% 17.5%;
    --ring: 224.3 76.3% 48%;

    /* Chart colors - dark mode */
    --chart-1: 217.2 91.2% 59.8%;
    --chart-2: 142.1 70.6% 45.3%;
    --chart-3: 47.9 95.8% 53.1%;
    --chart-4: 24.6 95% 53.1%;
    --chart-5: 0 84.2% 60.2%;

    /* Risk level colors - dark mode */
    --risk-low: 142.1 70.6% 45.3%;
    --risk-medium: 47.9 95.8% 53.1%;
    --risk-high: 24.6 95% 53.1%;
    --risk-critical: 0 62.8% 50.6%;
  }
}

@layer base {
  * {
    border-color: hsl(var(--border));
  }
  body {
    background-color: hsl(var(--background));
    color: hsl(var(--foreground));
    font-feature-settings: "rlig" 1, "calt" 1;
  }

  /* Keyboard accessibility - visible focus indicators */
  a:focus-visible,
  [tabindex]:focus-visible {
    outline: 2px solid hsl(var(--ring));
    outline-offset: 2px;
    border-radius: calc(var(--radius) - 2px);
  }

  /* Skip link for keyboard users */
  .skip-link {
    position: absolute;
    top: -40px;
    left: 0;
    background: hsl(var(--primary));
    color: hsl(var(--primary-foreground));
    padding: 8px 16px;
    z-index: 100;
    transition: top 0.2s;
  }

  .skip-link:focus-visible {
    top: 0;
  }
}

/* Custom scrollbar */
@layer utilities {
  .scrollbar-thin {
    scrollbar-width: thin;
    scrollbar-color: hsl(var(--muted)) transparent;
  }

  .scrollbar-thin::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  .scrollbar-thin::-webkit-scrollbar-track {
    background: transparent;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb {
    background-color: hsl(var(--muted));
    border-radius: 4px;
  }

  /* ═══════════════════════════════════════════════════════════════════
     Shared keyframes — used by both landing and auth pages
     GPU-accelerated: transform + opacity only
     ═══════════════════════════════════════════════════════════════════ */

  @keyframes ai-scene-float-slow {
    0%, 100% { transform: translateY(0) translateZ(0); }
    50% { transform: translateY(-14px) translateZ(0); }
  }
  @keyframes ai-scene-float-medium {
    0%, 100% { transform: translate(0, 0) translateZ(0); }
    33% { transform: translate(5px, -8px) translateZ(0); }
    66% { transform: translate(-4px, 4px) translateZ(0); }
  }
  @keyframes ai-scene-float-fast {
    0%, 100% { transform: translateY(0) scale(1) translateZ(0); }
    50% { transform: translateY(-6px) scale(1.08) translateZ(0); }
  }
  @keyframes ai-scene-node-pulse {
    0%, 100% { opacity: 0.2; }
    50% { opacity: 0.45; }
  }
  @keyframes ai-scene-node-pulse-alt {
    0%, 100% { opacity: 0.15; }
    50% { opacity: 0.35; }
  }
  @keyframes ai-scene-dash-flow {
    0% { stroke-dashoffset: 0; }
    100% { stroke-dashoffset: -60; }
  }
  @keyframes ai-scene-gradient-shift {
    0%, 100% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
  }
  @keyframes ai-scene-logo-bob {
    0%, 100% { transform: translateY(0) translateZ(0); }
    50% { transform: translateY(-8px) translateZ(0); }
  }
  @keyframes ai-scene-shape-morph {
    0%, 100% { border-radius: 28%; }
    25% { border-radius: 42% 28% 38% 32%; }
    50% { border-radius: 38% 44% 28% 40%; }
    75% { border-radius: 30% 38% 44% 28%; }
  }

  /* Shared animation classes */
  .ai-scene-float-slow { animation: ai-scene-float-slow 9s ease-in-out infinite; will-change: transform; }
  .ai-scene-float-medium { animation: ai-scene-float-medium 7s ease-in-out infinite; will-change: transform; }
  .ai-scene-float-fast { animation: ai-scene-float-fast 4.5s ease-in-out infinite; will-change: transform; }
  .ai-scene-node-pulse { animation: ai-scene-node-pulse 4s ease-in-out infinite; will-change: opacity; }
  .ai-scene-node-pulse-alt { animation: ai-scene-node-pulse-alt 5s ease-in-out infinite 1s; will-change: opacity; }
  .ai-scene-dash-flow { animation: ai-scene-dash-flow 9s linear infinite; }
  .ai-scene-dash-flow-rev { animation: ai-scene-dash-flow 11s linear infinite reverse; }
  .ai-scene-logo-float { animation: ai-scene-logo-bob 6s ease-in-out infinite; will-change: transform; }

  /* ═══════════════════════════════════════════════════════════════════
     Auth page — adaptive background + glassmorphism card
     ═══════════════════════════════════════════════════════════════════ */

  .auth-adaptive-bg {
    background: linear-gradient(
      -45deg,
      hsl(221 60% 95%),
      hsl(250 40% 95%),
      hsl(200 50% 94%),
      hsl(221 50% 96%)
    );
    background-size: 400% 400%;
    animation: ai-scene-gradient-shift 15s ease infinite;
  }
  .dark .auth-adaptive-bg {
    /* Match landing-gradient dark navy theme */
    background: linear-gradient(
      135deg,
      #050a18 0%,
      #0a1628 25%,
      #0f1f3d 50%,
      #0a1a35 75%,
      #060e20 100%
    );
  }

  /* Adaptive glassmorphism card — solid in light, glass in dark
     Performance: reduced blur from 24px to 12px for faster paint */
  .auth-card-adaptive {
    background: hsl(var(--card) / 0.95);
    border: 1px solid hsl(var(--border));
    box-shadow:
      0 8px 32px rgba(0, 0, 0, 0.08),
      0 2px 8px rgba(0, 0, 0, 0.04);
  }
  .dark .auth-card-adaptive {
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: 1px solid rgba(255, 255, 255, 0.12);
    box-shadow:
      0 8px 32px rgba(0, 0, 0, 0.3),
      0 0 40px rgba(100, 140, 255, 0.06),
      inset 0 1px 0 rgba(255, 255, 255, 0.1);
  }

  /* Auth background particle — theme-adaptive
     Performance: contain property isolates paint from DOM */
  .auth-bg-particle {
    position: absolute;
    border-radius: 50%;
    background: hsl(var(--primary) / 0.12);
    box-shadow: 0 0 8px hsl(var(--primary) / 0.1);
    contain: layout paint;
  }
  .dark .auth-bg-particle {
    background: rgba(255, 255, 255, 0.15);
    box-shadow: 0 0 8px rgba(180, 210, 255, 0.2);
  }

  /* CSS-only mouse glow area — no JS tracking needed
     Uses radial gradient that follows cursor via CSS (stationary glow effect) */
  .auth-mouse-glow-area {
    opacity: 0;
    background: radial-gradient(
      circle at 50% 40%,
      hsl(var(--primary) / 0.06) 0%,
      hsl(var(--primary) / 0.02) 30%,
      transparent 60%
    );
    transition: opacity 0.5s ease;
  }
  .dark .auth-mouse-glow-area {
    background: radial-gradient(
      circle at 50% 40%,
      rgba(140, 180, 255, 0.12) 0%,
      rgba(100, 140, 255, 0.04) 30%,
      transparent 60%
    );
  }
  .auth-adaptive-bg:hover .auth-mouse-glow-area {
    opacity: 1;
  }

  /* ═══════════════════════════════════════════════════════════════════
     Landing page — adaptive design system
     Responsive: 375 → 768 → 1024 → 1440px
     ═══════════════════════════════════════════════════════════════════ */

  /* Adaptive gradient background */
  .landing-gradient {
    background: linear-gradient(
      135deg,
      hsl(220 25% 96%) 0%,
      hsl(215 30% 92%) 25%,
      hsl(225 28% 94%) 50%,
      hsl(220 25% 95%) 75%,
      hsl(215 22% 97%) 100%
    );
  }
  .dark .landing-gradient {
    background: linear-gradient(
      135deg,
      #050a18 0%,
      #0a1628 25%,
      #0f1f3d 50%,
      #0a1a35 75%,
      #060e20 100%
    );
  }

  /* Gradient text for hero title — adaptive */
  .landing-gradient-text {
    background: linear-gradient(135deg, hsl(221 80% 40%) 0%, hsl(221 83% 35%) 40%, hsl(215 70% 30%) 70%, hsl(250 60% 45%) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }
  .dark .landing-gradient-text {
    background: linear-gradient(135deg, #60a5fa 0%, #38bdf8 40%, #06b6d4 70%, #a78bfa 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  /* Floating nav bar — adaptive glass effect
     Performance: reduced blur from 16px to 10px */
  .landing-nav {
    background: hsl(var(--card) / 0.9);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid hsl(var(--border));
  }
  .dark .landing-nav {
    background: rgba(10, 22, 40, 0.7);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.06);
  }

  /* Nav logo — subtle branded pill */
  .landing-nav-logo {
    border-radius: 10px;
    background: hsl(var(--primary) / 0.1);
    border: 1px solid hsl(var(--primary) / 0.2);
  }

  /* Shape-morphing hover — blob ↔ circle */
  .landing-shape-morph {
    border-radius: 28%;
    background: hsl(var(--primary) / 0.1);
    backdrop-filter: blur(12px);
    border: 1px solid hsl(var(--primary) / 0.25);
    transition: border-radius 0.3s ease, box-shadow 0.2s ease, transform 0.2s ease;
    animation: ai-scene-shape-morph 8s ease-in-out infinite;
  }
  .landing-shape-morph:hover {
    animation-play-state: paused;
    border-radius: 50%;
    box-shadow: 0 0 30px hsl(var(--primary) / 0.3), 0 0 60px hsl(var(--primary) / 0.1);
    transform: scale(1.08);
  }

  /* Feature cards — adaptive glass surface
     Performance: reduced blur from 12px to 8px in dark mode */
  .landing-feature-card {
    background: hsl(var(--card));
    border: 1px solid hsl(var(--border));
    border-radius: 1rem;
    padding: 1.25rem;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.04);
    transition: transform 0.2s ease, border-color 0.2s ease, box-shadow 0.2s ease;
  }
  .dark .landing-feature-card {
    background: rgba(255, 255, 255, 0.05);
    backdrop-filter: blur(8px);
    border: 1px solid rgba(255, 255, 255, 0.08);
    box-shadow: none;
  }
  @media (min-width: 640px) {
    .landing-feature-card { padding: 1.5rem; }
  }
  .landing-feature-card:hover {
    transform: translateY(-4px);
    border-color: hsl(var(--primary) / 0.3);
    box-shadow: 0 8px 30px hsl(var(--primary) / 0.1);
  }

  /* CTA button — soft glow */
  .landing-cta-btn {
    box-shadow: 0 0 16px hsl(var(--primary) / 0.25);
    transition: box-shadow 0.2s ease, transform 0.2s ease;
  }
  .landing-cta-btn:hover {
    box-shadow: 0 0 24px hsl(var(--primary) / 0.45), 0 0 48px hsl(var(--primary) / 0.15);
    transform: translateY(-2px);
  }

  /* Floating particles — adaptive
     Performance: contain property isolates paint from DOM */
  .landing-particle {
    position: absolute;
    border-radius: 50%;
    background: hsl(var(--primary) / 0.15);
    box-shadow: 0 0 8px hsl(var(--primary) / 0.15);
    contain: layout paint;
  }
  .dark .landing-particle {
    background: rgba(59, 130, 246, 0.25);
    box-shadow: 0 0 8px rgba(59, 130, 246, 0.25);
  }

  /* Landing section card — for stats, frameworks, etc.
     Performance: reduced blur, increased opacity for light mode */
  .landing-section-card {
    background: hsl(var(--card) / 0.8);
    border: 1px solid hsl(var(--border));
    border-radius: 0.75rem;
    backdrop-filter: blur(6px);
  }
  .dark .landing-section-card {
    background: rgba(255, 255, 255, 0.04);
    border: 1px solid rgba(255, 255, 255, 0.06);
    backdrop-filter: blur(6px);
  }

  /* ── Accessibility: respect prefers-reduced-motion ──────────────── */
  @media (prefers-reduced-motion: reduce) {
    .ai-scene-float-slow,
    .ai-scene-float-medium,
    .ai-scene-float-fast,
    .ai-scene-node-pulse,
    .ai-scene-node-pulse-alt,
    .ai-scene-dash-flow,
    .ai-scene-dash-flow-rev,
    .ai-scene-logo-float,
    .landing-shape-morph,
    .auth-adaptive-bg {
      animation: none !important;
    }
    .landing-feature-card,
    .landing-cta-btn,
    .landing-shape-morph {
      transition: none !important;
    }
  }

  /* ═══════════════════════════════════════════════════════════════════
     Internal pages — dashboard-enhanced design system
     Scoped via .dashboard-enhanced wrapper on layout
     ═══════════════════════════════════════════════════════════════════ */

  /* Dashboard gradient background — matches landing page */
  .dashboard-gradient {
    background: linear-gradient(
      135deg,
      hsl(220 25% 96%) 0%,
      hsl(215 30% 92%) 25%,
      hsl(225 28% 94%) 50%,
      hsl(220 25% 95%) 75%,
      hsl(215 22% 97%) 100%
    );
  }
  .dark .dashboard-gradient {
    background: linear-gradient(
      135deg,
      #050a18 0%,
      #0a1628 25%,
      #0f1f3d 50%,
      #0a1a35 75%,
      #060e20 100%
    );
  }

  /* Card enhancement — refined shadows + subtle hover lift */
  .dashboard-enhanced [data-slot="card"] {
    box-shadow:
      0 1px 3px rgba(0, 0, 0, 0.04),
      0 4px 12px rgba(0, 0, 0, 0.03);
    transition: box-shadow 200ms ease, transform 200ms ease;
  }
  .dashboard-enhanced [data-slot="card"]:hover {
    box-shadow:
      0 2px 6px rgba(0, 0, 0, 0.06),
      0 8px 24px rgba(0, 0, 0, 0.06);
    transform: translateY(-1px);
  }
  .dark .dashboard-enhanced [data-slot="card"] {
    box-shadow:
      0 1px 3px rgba(0, 0, 0, 0.2),
      0 4px 12px rgba(0, 0, 0, 0.15);
  }
  .dark .dashboard-enhanced [data-slot="card"]:hover {
    box-shadow:
      0 2px 6px rgba(0, 0, 0, 0.25),
      0 8px 24px rgba(0, 0, 0, 0.2);
  }

  /* Sidebar — transparent to show parent gradient */
  .internal-sidebar {
    background: transparent;
    border-right: 1px solid hsl(var(--border) / 0.5);
  }
  .dark .internal-sidebar {
    background: transparent;
    border-right: 1px solid hsl(var(--border) / 0.3);
  }
  .internal-sidebar-item {
    position: relative;
    transition: background-color 200ms ease, color 200ms ease;
  }
  .internal-sidebar-item:hover {
    box-shadow: inset 3px 0 0 hsl(var(--primary) / 0.3);
  }
  .internal-sidebar-item-active {
    background-color: hsl(var(--primary) / 0.1);
    color: hsl(var(--primary));
    box-shadow: inset 3px 0 0 hsl(var(--primary));
  }
  .internal-sidebar-item-active:hover {
    box-shadow: inset 3px 0 0 hsl(var(--primary));
  }

  /* Header — transparent to show parent gradient */
  .internal-header {
    background: transparent;
    border-bottom: 1px solid hsl(var(--border) / 0.5);
  }
  .dark .internal-header {
    background: transparent;
    border-bottom: 1px solid hsl(var(--border) / 0.3);
  }

  /* Tabs — inset background + active shadow */
  .internal-tabs-list {
    background-color: hsl(var(--muted) / 0.5);
    border: 1px solid hsl(var(--border));
    border-radius: calc(var(--radius) + 2px);
    padding: 2px;
  }
  .internal-tabs-list [data-state="active"] {
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.06);
    border-radius: var(--radius);
    transition: box-shadow 200ms ease;
  }

  /* Reduced motion — internal pages */
  @media (prefers-reduced-motion: reduce) {
    .dashboard-enhanced [data-slot="card"],
    .internal-sidebar-item,
    .internal-header {
      transition: none !important;
    }
    .dashboard-enhanced [data-slot="card"]:hover {
      transform: none !important;
    }
  }

  /* Dashboard drag-and-drop styles */
  .widget-dragging {
    opacity: 0.5;
    transform: scale(1.02);
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
    z-index: 50;
  }

  .widget-drag-handle {
    cursor: grab;
    transition: color 150ms ease;
  }
  .widget-drag-handle:hover {
    color: hsl(var(--primary));
  }
  .widget-drag-handle:active {
    cursor: grabbing;
  }

  .widget-drop-placeholder {
    border: 2px dashed hsl(var(--primary) / 0.5);
    border-radius: var(--radius);
    background-color: hsl(var(--primary) / 0.05);
    min-height: 100px;
  }
}
